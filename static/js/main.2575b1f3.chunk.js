(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(37)},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"quizz",function(){return H});n(25);var a=n(0),o=n.n(a),c=n(19),i=n.n(c),s=n(39),u=n(5),l=n(6),d=n(9),E=n(7),f=n(10),m=n(8),p="a0acf48d85383e412e1e53f18b225c6a",v="https://api.themoviedb.org/3",h="".concat(v,"/discover/movie"),b="".concat(h,"?api_key=").concat(p,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1"),I="".concat("https://image.tmdb.org","/t/p/w500"),O=function(){return fetch(b).then(function(e){return e.json()}).then(function(e){return y(e)})},y=function(e){var t=e.results,n=t.map(function(e){return w(e.id)});return Promise.all(n).then(function(e){return t.map(function(t,n){return{id:t.id,title:t.title,actors:e[n].slice(0,2),poster:"".concat(I).concat(t.poster_path)}})})},w=function(e){return fetch(function(e){return"".concat(v,"/movie/").concat(e,"/credits?api_key=").concat(p)}(e)).then(function(e){return e.json()}).then(function(e){return R(e)})},R=function(e){return e.cast},S=n(11),g=new S.b.Entity("actors"),j=new S.b.Array(g);j.define({actors:j});var T=new S.b.Entity("movies",{actors:[g]}),V=function(e){return{type:"MOVIES_RETRIEVED",payload:e}},N=function(e){return Math.floor(Math.random()*e)},q=function(e,t){var n=e.filter(function(e){return!t.includes(e)});0===n.length&&(n=e);var r=n[N(n.length)];return e.findIndex(function(e){return r===e})},z=function(e,t){var n=e.filter(function(e){return t.includes(e)});if(0===n.length)return q(e,t);var r=n[N(n.length)];return e.findIndex(function(e){return r===e})},k=function(e,t,n){return e.movies.byId[n].actors.find(function(e){return e===t})?"YES":"NO"},M=function(e){return{type:"QUESTIONS_RETRIEVED",payload:e}},_=function(e){var t=e.movies.allIds.map(function(t){return e.movies.byId[t]}),n=e.actors.allIds.slice(),r=t.map(function(t,r){var a=(r%2?q:z)(n,t.actors),o=e.actors.byId[n[a]];return n.splice(a,1),{movie:t.title,actor:o.name,poster:t.poster,answer:k(e,o.id,t.id)}});return r.map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]})},A=function(e){var t=e.question,n=t.movie,r=t.poster,a=t.actor,c=e.onClick;return o.a.createElement("div",{className:"text-center"},o.a.createElement("div",{className:"text-center"},o.a.createElement("h2",null,"Movie ",n)),o.a.createElement("img",{className:"rounded",src:r,alt:n}),o.a.createElement("div",{className:"text-center"},o.a.createElement("h2",null,"Actor ",a)),o.a.createElement("div",{className:"text-center"},o.a.createElement("button",{className:"btn btn-success m-3",onClick:function(){return c("YES")}},"YES"),o.a.createElement("button",{className:"btn btn-warning m-3",onClick:function(){return c("NO")}},"NO")))},x=function(e){return o.a.createElement("button",{className:"btn btn-primary",onClick:e.onClick},e.children)},Q=(n(35),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"segment7"},this.props.seconds)}}]),t}(a.Component)),C=function(e){var t=e.seconds,n=e.score,r=e.onClick,a=e.buttonLabel,c=e.children;return o.a.createElement("div",null,o.a.createElement(Q,{seconds:t}),c&&o.a.createElement("h1",null,c),void 0!==n&&o.a.createElement("h1",null,"Your score: ",n),a&&o.a.createElement(x,{onClick:r},a))},D=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(a)))).state={questionIndex:0,elapsed:0},n.handleAnswer=function(e){n.props.answerQuestion(n.props.quizz.questions[n.props.quizz.score],e),n.setState(function(e){return{questionIndex:e.questionIndex+1}})},n.nextQuestion=function(){return n.state.questionIndex<n.props.quizz.questions.length?n.props.quizz.questions[n.state.questionIndex]:null},n.restartQuizz=function(){n.setState({questionIndex:0,elapsed:0}),n.props.retrieveQuestions(),n.timer=setInterval(function(){return n.tick()},50)},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"stopTimer",value:function(){clearInterval(this.timer)}},{key:"tick",value:function(){this.setState({elapsed:new Date-this.props.quizz.start})}},{key:"render",value:function(){var e=this,t=this.props.quizz,n=t.gameState,r=t.score,a=(Math.round(this.state.elapsed/100)/10).toFixed(1);if("INIT"===n)return o.a.createElement(C,{onClick:function(){return e.restartQuizz()},buttonLabel:"PLAY"},"WELCOME TO THE MOVIE QUIZZ");if("GAME_OVER"===n)return this.stopTimer(),o.a.createElement(C,{onClick:function(){return e.restartQuizz()},seconds:a,score:r,buttonLabel:"PLAY AGAIN"},"GAME OVER");var c=this.nextQuestion();return c?o.a.createElement("div",null,o.a.createElement(C,{score:r,seconds:a}),o.a.createElement(A,{onClick:this.handleAnswer,question:c})):(this.stopTimer(),o.a.createElement(C,{onClick:function(){return e.restartQuizz()},seconds:a,score:r,buttonLabel:"PLAY AGAIN"},"YOU WON"))}}]),t}(a.Component),U={retrieveQuestions:function(){return function(e,t){return e({type:"RETRIEVE_QUESTIONS"}),e(M(_(t())))}},answerQuestion:function(e,t){return{type:"ANSWER_QUESTION",payload:{question:e,answer:t}}}},L=Object(m.b)(function(e){return{quizz:e.quizz}},U)(D),Y=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.retrieveMovies()}},{key:"render",value:function(){return o.a.createElement("div",{className:"text-center mt-5"},o.a.createElement(L,null))}}]),t}(a.Component),G={retrieveMovies:function(){return function(e){return e({type:"RETRIEVE_MOVIES"}),O().then(function(t){return e(V((n=t,Object(S.a)(n,new S.b.Array(T)))));var n})}}},W=Object(m.b)(function(e){return{movies:e.movies}},G)(Y),P=n(12),J=n(3),Z=Object(J.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"RETRIEVE_MOVIES":return{};case"MOVIES_RETRIEVED":return r.entities.actors||{};default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"RETRIEVE_MOVIES":return[];case"MOVIES_RETRIEVED":return r.entities.actors&&Object.keys(r.entities.actors).map(function(e){return parseInt(e)})||[];default:return e}}}),B=Object(J.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"RETRIEVE_MOVIES":return{};case"MOVIES_RETRIEVED":return r.entities.movies||{};default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"RETRIEVE_MOVIES":return[];case"MOVIES_RETRIEVED":return r.result||[];default:return e}},loading:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"RETRIEVE_MOVIES"===(arguments.length>1?arguments[1]:void 0).type}}),F=n(23),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"QUESTIONS_RETRIEVED":return Object(P.a)({},e,{gameState:"PLAYING",questions:r,start:new Date,end:void 0});case"RETRIEVE_QUESTIONS":return{questions:[],gameState:"INIT",answers:[],score:0,start:void 0,end:void 0};case"ANSWER_QUESTION":return Object(P.a)({},e,{answers:[].concat(Object(F.a)(e.answers),[r.answer]),score:r.question.answer===r.answer?e.score+1:e.score,gameState:r.question.answer!==r.answer?"GAME_OVER":e.gameState,end:r.question.answer!==r.answer?new Date:e.end});default:return e}},K=Object(J.combineReducers)(Object(P.a)({movies:B,actors:Z},r)),X=n(21),$=n(22),ee=Object(J.createStore)(K,{movies:{byId:{},allIds:[]},actors:{byId:{},allIds:[]},quizz:{questions:[],answers:[],score:0,gameState:"INIT",start:0,end:0}},Object($.composeWithDevTools)(Object(J.applyMiddleware)(X.a)));i.a.render(o.a.createElement(m.a,{store:ee},o.a.createElement(s.a,null,o.a.createElement(W,{className:"container"}))),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.2575b1f3.chunk.js.map